extends layout
block content
  .container
    h2 Hotline Numbers
    .success
    .error
    form(id='form1' action='/addNumber' method= 'post')
      input#id(type='hidden', name='id', value='')
      table
        tr
          td(style='text-align: center')
            input#country(type='text', name='country', placeholder='Country', value='')
            | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            input#number(type='text', name='number', placeholder='Number', value='')
            | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            input#subbtn.btn(type='submit', name='sub', value='Add Number')
    table.table
      tbody
        tr
          th Country
          th Key
          th Action
        if data.length
         each item in data
          tr
            td #{item['country']}
            td #{item['number']}
            td
               a.editlink(href='javascript:void(0)', data-id='#{item["_id"]}') Edit
               | &nbsp;&nbsp;
               a(href='/deleteNumber?id=#{item["_id"]}', onclick='return confirm("You are going to delete this number. Continue?")') Delete

    script(src='https://code.jquery.com/jquery-3.1.1.min.js')
    script.

      $(function() { 

        $('.editlink').on('click', function(){

          var id = $(this).data('id');

          $.ajax({

            method: "GET",

            url: "/fetchdataNumber",

            data: { id:  id },

          }).done(function( data ) {

            $('#id').val(data[0]['_id']);

            $('#country').val(data[0]['country']);
            
            $('#number').val(data[0]['number']);

            $("#subbtn").val('Edit Number');

            $('#form1').attr('action', '/editNumber');

          });

        });

      });