extends layout
block content
  .container
    h2 Users
    .success
    .error
    form(id='form1' action='/addUser' method= 'post')
      input#id(type='hidden', name='id', value='')
      table
        tr
          td(style='text-align: center')
            input#FirstName(type='text', name='FirstName', placeholder='First Name', value='')
            | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            input#LastName(type='text', name='LastName', placeholder='Last Name', value='')
            | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            input#Email(type='text', name='Email', placeholder='Email', value='')
            | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            input#Number(type='text', name='Number', placeholder='Phone Number', value='')
            | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            input#subbtn.btn(type='submit', name='sub', value='Add User')
    table.table
      tbody
        tr
          th First Name
          th Last Name
          th Email
          th Phone Number
          th Action
        if data.length
         each item in data
          tr
            td #{item['FirstName']}
            td #{item['LastName']}
            td #{item['Email']}
            td #{item['Number']}
            td
               a.editlink(href='javascript:void(0)', data-id='#{item["_id"]}') Edit
               | &nbsp;&nbsp;
               a(href='/deleteUser?id=#{item["_id"]}', onclick='return confirm("You are going to delete this user. Continue?")') Delete

    script(src='https://code.jquery.com/jquery-3.1.1.min.js')
    script.

      $(function() { 

        $('.editlink').on('click', function(){

          var id = $(this).data('id');

          $.ajax({

            method: "GET",

            url: "/fetchdataUser",

            data: { id:  id },

          }).done(function( data ) {

            $('#id').val(data[0]['_id']);

            $('#FirstName').val(data[0]['FirstName']);

            $('#LastName').val(data[0]['LastName']);

            $('#Email').val(data[0]['Email']);
            
            $('#Number').val(data[0]['Number']);
            
            $("#subbtn").val('Edit User');

            $('#form1').attr('action', '/editUser');

          });

        });

      });